// Image Test (option+shift+r)
// (opt shift r)

var artboards = [[doc currentPage] artboards];

log ([artboards count]);

var ag = artboards[0];

var rect = ag.addLayerOfType("rectangle");


rect.setName("Test Rect");

[rect frame].width = 200;
[rect frame].height = 200;

[rect frame].x = 200;
[rect frame].y = 200;

rect.style().fills().addNewStylePart();
    var color = rect.style().fills()[0].color();
    color.setRed(1);
    color.setGreen(0);
    color.setBlue(1);



var docFolder = [[doc fileURL] path];

log (docFolder);

var imageLayer = ag.addLayerOfType("image");


imageLayer.setName("Test Image");

log (imageLayer.class());

var s = "http://api.randomuser.me/0.3.2/portraits/women/20.jpg";
var imgURL = [NSURL URLWithString:s];

var imageData = [NSData dataWithContentsOfURL: imgURL];

var image = [[NSImage alloc] initWithData:imageData];

if (image)
{
  log ("Got Data");

  var layerFrame = [imageLayer frame];

  [layerFrame setConstrainProportions: false];
  [layerFrame setHeight: 200];
  [layerFrame setWidth: 200];
  [layerFrame setConstrainProportions: true];

  imageLayer.image = image;
}
